@import "../../styles/theme.scss";

.detail-modal-root {
  position: fixed; // 关键：确保固定定位
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.65); // 半透明深色遮罩
  backdrop-filter: blur(20rpx); // 虚化蒙住的效果
  z-index: 2000; // 绝对置顶，覆盖全屏
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 60rpx;
  box-sizing: border-box;

  .modal-card {
    width: 100%;
    background: #FFFFFF;
    border-radius: 48rpx;
    overflow: hidden;
    box-shadow: 0 40rpx 100rpx rgba(0, 0, 0, 0.4);
    animation: modal-pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;

    .card-header {
      padding: 24rpx 40rpx 0; // 极大收紧，移除底部留白
      background: transparent; // 移除背景色，使视觉更统一
      display: flex;
      justify-content: flex-end; // 按钮靠右
      align-items: center;

      .category-label {
        display: none; // 标签移动到 Body 内
      }

      .close-btn {
        font-size: 48rpx;
        color: #DDD;
        line-height: 1;
        padding: 10rpx;
      }
    }

    .card-body {
      padding: 0 48rpx 60rpx; // 顶部间距由 header 承担，此处设为 0

      .task-title {
        font-size: 40rpx;
        font-weight: bold;
        color: #1A1A1A;
        line-height: 1.4;
        display: block;
        margin-bottom: 20rpx;
        word-break: break-all;
      }

      .task-type-sub {
        margin-bottom: 60rpx;
        display: flex;
        align-items: center;
        gap: 16rpx;

        .category-label {
          font-size: 22rpx;
          font-weight: 800;
          padding: 6rpx 20rpx;
          border-radius: 30rpx;
          letter-spacing: 2rpx;
          &.reward { background: rgba($primary-color, 0.15); color: $primary-color; }
          &.penalty { background: rgba(255, 77, 79, 0.1); color: #FF4D4F; }
        }

        .status-tag {
          font-size: 22rpx;
          font-weight: 800;
          padding: 6rpx 20rpx;
          border-radius: 30rpx;
          letter-spacing: 2rpx;

          &.waiting {
            background: rgba(255, 165, 0, 0.1);
            color: #FF8C00;
          }

          &.done {
            background: rgba(82, 196, 26, 0.1);
            color: #52C41A;
          }
        }
      }

      .info-list {
        .info-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 30rpx;
          &:last-child { margin-bottom: 0; }

          .label { font-size: 24rpx; color: #BBB; font-weight: 500; }
          .value {
            font-size: 28rpx;
            color: #333;
            font-weight: 600;

            &.points {
              font-size: 32rpx;
              &.reward { color: $primary-color; }
              &.penalty { color: #FF4D4F; }
            }
          }
        }
      }
    }

    .card-footer {
      padding: 0 48rpx 60rpx;
      display: flex;
      flex-direction: column;
      gap: 20rpx;

      // 适配 Taroify Button
      .taroify-button {
        width: 100%;
        height: 96rpx;
        line-height: 96rpx;
        border-radius: 48rpx;
        font-size: 30rpx;
        font-weight: bold;
        &::after { border: none; }
      }

      .btn-primary {
        background: linear-gradient(135deg, $primary-color, #E5C59F);
        color: #fff;
        box-shadow: 0 12rpx 24rpx rgba($primary-color, 0.25);
      }

      .btn-secondary {
        background: #F5F5F5;
        color: #999;
      }
    }
  }
}

@keyframes modal-pop {
  0% { transform: scale(0.9); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}
