# 开发进度交接文档 (2026-01-31 更新)

## 🎨 当前视觉规范 (理物极简风)

- **主题色 (Primary)**: `#D4B185` (香槟金 - 用于核心数值与高亮)
- **底色 (Secondary)**: `#1A1A1A` (碳黑 - 用于看板与沉浸式组件)
- **背景 (Background)**: `#F8F8F8` (极简浅灰)
- **圆角规范**: 卡片与弹窗 `48rpx` / 胶囊标签 `30rpx`
- **交互核心**:
  - 全量毛玻璃蒙层 (`backdrop-filter: blur(20rpx)`)
  - 灵动悬浮呼吸感 (FAB 按钮动画：3s 周期 / 16rpx 振幅)
  - 全页面稳定性锁定 (`disableScroll: true`)

## ✅ 已完成工作 (截至 2026-01-31)

### 1. 礼品与背包系统 (Store & Inventory)

- **堆叠逻辑实现**: 在背包页面实现相同礼品自动按名称归类，显示 `xN` 数量标签，解决卡片冗余问题。
- **物理堆叠视觉**: 利用 CSS 伪元素模拟卡片重叠阴影效果，提升背包页面的“理物”品质感。
- **布局对齐优化**: 修正了新增礼品抽屉中图片框与表单区域的顶端对齐问题，微调高度以达到像素级平衡。

### 2. 全场景仪式感通知体系 (Notice System)

- **后端消息闭环**: 修改 `addTask`, `updateTaskStatus`, `manageGift`, `useItem` 等 4 个云函数，自动向 `Notices` 集合写入交互记录。
- **名片式通知弹窗**: 首页建立实时监听，收到新消息时弹出专属“仪式感弹窗”，取代简易浮层，并伴随短震动反馈。
- **消息类型涵盖**: 包括新任务、任务完成、商店上新、兑换请求等全方位互动提醒。

### 3. 首页与任务系统 (历史升级回顾)

- **组件库对齐**: 接入 `Taroify Tabs`，指示条颜色统一为香槟金。
- **三维监控看板**: 顶部重构为“待处理/今日新增/累计完成”高张力数字展示。

## 🤖 AI 助手行为准则 (上下文基础)

> **接手 AI 请严格遵守以下规范：**

1. **对话语言**: 必须全程使用**中文**回答。
2. **Git 提交习惯**: 严格遵循 `"type: 中文信息"` 格式（例如：`fix: 修复礼品堆叠显示错误`）。
   - **绝对禁止**: 提交信息中不能包含任何标识符（如 `Co-Authored-By` 等系统默认后缀）。
3. **固定回复后缀**: 每次回答的末尾必须携带语句：**“早安 啵啵肠”**。
4. **代码风格**: 保持 React 开发者习惯，使用 Hooks 方案，样式需严格遵守理物风规范。

## 🚀 新设备接手步骤

1. 执行 `git pull` 获取最新提交。
2. **环境必做**:
   - 在云开发控制台中确保已有 **`Notices`** 集合（权限设置为：所有用户可读，仅创建者及管理员可写）。
   - 对 `addTask`, `updateTaskStatus`, `manageGift`, `useItem` 执行“上传并部署：云端安装依赖”。
3. 运行 `npm run dev:weapp` 启动预览。

## 📝 待办事项 (Next Steps)

- [ ] 考虑在“收到通知”并点击“知道了”时，增加更丰富的粒子动效。
- [ ] 优化商店页面在大图加载时的骨架屏占位体验。
- [ ] 实现全站切换主题色（深浅模式）的平滑过渡方案。
